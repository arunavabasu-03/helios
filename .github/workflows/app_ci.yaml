on: [pull_request]
defaults:
      run:
        working-directory: app
jobs:
  update:
    runs-on: ubuntu-latest
    steps:
      - name: 🏗 Setup repo
        uses: actions/checkout@v3

      - name: 🏗 Setup Node
        uses: actions/setup-node@v3
        with:
          node-version: 18.x
          cache: yarn
          cache-dependency-path: app/yarn.lock
      - name: 🏗 Setup EAS
        uses: expo/expo-github-action@v8
        with:
          eas-version: latest
          token: ${{ secrets.EXPO_TOKEN }}

      - name: 📦 Install dependencies
        run: yarn install

      - name: 🚀 Create preview
        uses: expo/expo-github-action/preview@v8
        with:
          command:  eas update --auto 
          working-directory: app
# name: 🌱 EXPO CI
# on: [pull_request]
# jobs:
#   app-preview:
#     runs-on: ubuntu-latest
#     steps:
#       - name: 🏗 Setup repo
#         uses: actions/checkout@v3

#       - name: 🏗 Setup Node
#         uses: actions/setup-node@v3
#         with:
#           node-version: 18.x 
#           cache: yarn
#           cache-dependency-path: app/yarn.lock

#       - name: 🏗 Setup EAS
#         uses: expo/expo-github-action@v8
#         with:
#           eas-version: latest
#           token: ${{ secrets.EXPO_TOKEN }}

#       - name: 📦 Install dependencies
#         run: cd app && yarn install
  

#       - name: 🚀 Create preview
#         uses: expo/expo-github-action/preview@v8
#         with:
#           command:  eas update --auto
          